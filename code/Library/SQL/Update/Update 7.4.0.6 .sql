/* UPDATE 7.4.0.6*/

SET SEARCH_PATH = "COMMON";

UPDATE "Variable" SET "VALUE" = '7.4.0.6' WHERE "NAME" = 'INSTRUCTION_DB_VERSION';

SET search_path to "0001";

ALTER TABLE "Alumno_Parte" DROP CONSTRAINT "Alumno_Parte_OID_ALUMNO_fkey";

ALTER TABLE "Alumno_Parte" ADD CONSTRAINT "Alumno_Parte_OID_ALUMNO_fkey" FOREIGN KEY ("OID_ALUMNO") 
REFERENCES "Alumno" ("OID") MATCH SIMPLE
ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE "Alumno_Practica" DROP CONSTRAINT fk_alumno_practica_alumno;

ALTER TABLE "Alumno_Practica" ADD CONSTRAINT fk_alumno_practica_alumno FOREIGN KEY ("OID_ALUMNO")
      REFERENCES "Alumno" ("OID") MATCH SIMPLE
      ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE "PreguntaExamen" DROP COLUMN "FECHA_PUBLICACION";

SET search_path to "0002";

ALTER TABLE "Alumno_Parte" DROP CONSTRAINT "Alumno_Parte_OID_ALUMNO_fkey";

ALTER TABLE "Alumno_Parte" ADD CONSTRAINT "Alumno_Parte_OID_ALUMNO_fkey" FOREIGN KEY ("OID_ALUMNO") 
REFERENCES "Alumno" ("OID") MATCH SIMPLE
ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE "Alumno_Practica" DROP CONSTRAINT fk_alumno_practica_alumno;

ALTER TABLE "Alumno_Practica" ADD CONSTRAINT fk_alumno_practica_alumno FOREIGN KEY ("OID_ALUMNO")
      REFERENCES "Alumno" ("OID") MATCH SIMPLE
      ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE "PreguntaExamen" DROP COLUMN "FECHA_PUBLICACION";